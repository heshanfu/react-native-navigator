{"version":3,"sources":["../src/event.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,IAAI,MAAM,GAAG,EAAE,CAAC;AAChB,IAAI,GAAG,GAAG,CAAC,CAAC;AACZ,IAAI,YAAY,GAAG,SAAf,YAAY,GAAc,EAAE,CAAC;;AAGjC,YAAY,CAAC,SAAS,CAAC,EAAE,GAAG,UAAS,SAAS,EAAC,QAAQ,EAAC;AACpD,QAAI,IAAI,GAAG,IAAI,CAAC;AAChB,YAAQ,CAAC,GAAG,GAAG,OAAO,QAAQ,CAAC,GAAG,IAAI,WAAW,GAAG,GAAG,EAAE,GAAG,QAAQ,CAAC,GAAG,CAAC;;AAEzE,aAAS,CAAC,OAAO,CAAC,MAAM,EAAE,UAAS,IAAI,EAAC;AACpC,SAAC,MAAM,CAAC,SAAS,CAAC,GAAG,MAAM,CAAC,SAAS,CAAC,IAAI,EAAE,CAAA,CAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;KACjE,CAAC,CAAC;CACN,CAAC;;AAEF,YAAY,CAAC,SAAS,CAAC,GAAG,GAAG,UAAS,SAAS,EAAC,QAAQ,EAAC;AACrD,QAAI,IAAI,GAAG,IAAI,CAAC;AAChB,QAAG,SAAS,IAAE,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC,KAC1B;AACD,iBAAS,CAAC,OAAO,CAAC,MAAM,EAAE,UAAS,IAAI,EAAC;AACpC,gBAAG,QAAQ,EAAC;AACR,oBAAI,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;AACtB,qBAAK,IAAI,CAAC,GAAC,CAAC,EAAE,EAAE,EAAG,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAG,EAAE,CAAC,EAAC;AACtC,wBAAG,EAAE,CAAC,GAAG,IAAI,QAAQ,CAAC,GAAG,EAAC;AACtB,0BAAE,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;AACf,yBAAC,EAAE,CAAC;qBACP;iBACJ;aACJ,MAAI;AACD,sBAAM,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;aACrB;SACJ,CAAC,CAAC;KACN;CAEJ,CAAC;;AAEF,YAAY,CAAC,SAAS,CAAC,IAAI,GAAG,UAAS,SAAS,EAAC;;AAE7C,QAAI,IAAI,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAC,CAAC,CAAC;QACjC,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;AACxC,SAAK,IAAI,CAAC,GAAC,CAAC,EAAE,EAAE,EAAG,EAAE,GAAG,SAAS,CAAC,CAAC,CAAC,EAAG,EAAE,CAAC,EAAC;AACvC,YAAG,CAAC,EAAE,CAAC,IAAI,EAAC;AACR,cAAE,CAAC,IAAI,GAAG,CAAC,CAAC;;AAEZ,cAAE,CAAC,KAAK,CAAC,IAAI,EAAC,IAAI,CAAC,CAAC;AACpB,gBAAG,SAAS,CAAC,CAAC,CAAC,KAAI,EAAE,EAAC;AAClB,iBAAC,EAAE,CAAC;aACP;;AAED,cAAE,CAAC,IAAI,GAAG,CAAC,CAAC;SACf;KACJ;CAEJ,CAAC;;AAGF,MAAM,CAAC,OAAO,GAAG,IAAI,YAAY,EAAE,CAAC","file":"event.js","sourcesContent":["'use strict';\n\nvar events = {};\nvar _id = 0;\nvar SimpleEmiter = function() {};\n\n\nSimpleEmiter.prototype.on = function(eventName,callback){\n    var self = this;\n    callback._id = typeof callback._id == \"undefined\" ? _id++ : callback._id;\n\n    eventName.replace(/\\S+/g, function(name){\n        (events[eventName] = events[eventName] || [] ).push(callback);\n    });\n};\n\nSimpleEmiter.prototype.off = function(eventName,callback){\n    var self = this;\n    if(eventName=='*') events = {};\n    else {\n        eventName.replace(/\\S+/g, function(name){\n            if(callback){\n                var ev = events[name];\n                for (var i=0, cb; (cb = ev && ev[i]); ++i){\n                    if(cb._id == callback._id){\n                        ev.splice(i,1);\n                        i--;\n                    }\n                }\n            }else{\n                events[name] = {};\n            }\n        });\n    }\n\n};\n\nSimpleEmiter.prototype.emit = function(eventName){\n\n    var args = [].slice.call(arguments,1),\n        callbacks = events[eventName] || [];\n    for (var i=0, cb; (cb = callbacks[i]); ++i){\n        if(!cb.busy){\n            cb.busy = 1;\n\n            cb.apply(null,args);\n            if(callbacks[i]!== cb){\n                i--;\n            }\n\n            cb.busy = 0;\n        }\n    }\n\n};\n\n\nmodule.exports = new SimpleEmiter();\n"]}